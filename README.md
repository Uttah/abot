# AnonBot - Telegram-ะฑะพั ะดะปั ะฐะฝะพะฝะธะผะฝัั ัะพะพะฑัะตะฝะธะน

Telegram-ะฑะพั, ะฟะพะทะฒะพะปัััะธะน ะฟะพะปัะทะพะฒะฐัะตะปัะผ ัะพะทะดะฐะฒะฐัั ัะฝะธะบะฐะปัะฝัะต ัััะปะบะธ ะดะปั ะฟะพะปััะตะฝะธั ะฐะฝะพะฝะธะผะฝัั ัะพะพะฑัะตะฝะธะน. ะัะฟัะฐะฒะธัะตะปะธ ะผะพะณัั ะฟะธัะฐัั ัะตะบัั, ะพัะฟัะฐะฒะปััั ัะพัะพ, ะฒะธะดะตะพ, ะณะพะปะพัะพะฒัะต ะธ ะดััะณะธะต ัะธะฟั ะผะตะดะธะฐ. ะะปะฐะดะตะปะตั ัััะปะบะธ ะผะพะถะตั ะฐะฝะพะฝะธะผะฝะพ ะพัะฒะตัะฐัั ะฝะฐ ะฟะพะปััะตะฝะฝัะต ัะพะพะฑัะตะฝะธั ะธ ะฑะปะพะบะธัะพะฒะฐัั ะฝะตะถะตะปะฐัะตะปัะฝัั ะพัะฟัะฐะฒะธัะตะปะตะน.

## ะกะพะดะตัะถะฐะฝะธะต

- [ะะพะทะผะพะถะฝะพััะธ](#ะฒะพะทะผะพะถะฝะพััะธ)
- [ะขัะตะฑะพะฒะฐะฝะธั](#ััะตะฑะพะฒะฐะฝะธั)
- [ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั](#ะฟะตัะตะผะตะฝะฝัะต-ะพะบััะถะตะฝะธั)
- [ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ](#ัััะฐะฝะพะฒะบะฐ-ะธ-ะทะฐะฟััะบ)
  - [ะะพะบะฐะปัะฝัะน ะทะฐะฟััะบ](#ะปะพะบะฐะปัะฝัะน-ะทะฐะฟััะบ)
  - [ะะฐะฟััะบ ัะตัะตะท Docker Compose](#ะทะฐะฟััะบ-ัะตัะตะท-docker-compose)
- [ะัะฟะพะปัะทะพะฒะฐะฝะธะต](#ะธัะฟะพะปัะทะพะฒะฐะฝะธะต)
  - [ะกะพะทะดะฐะฝะธะต ัััะปะบะธ (ัะพะปัะบะพ ะดะปั ะฐะดะผะธะฝะพะฒ)](#ัะพะทะดะฐะฝะธะต-ัััะปะบะธ-ัะพะปัะบะพ-ะดะปั-ะฐะดะผะธะฝะพะฒ)
  - [ะัะฟัะฐะฒะบะฐ ะฐะฝะพะฝะธะผะฝะพะณะพ ัะพะพะฑัะตะฝะธั](#ะพัะฟัะฐะฒะบะฐ-ะฐะฝะพะฝะธะผะฝะพะณะพ-ัะพะพะฑัะตะฝะธั)
  - [ะัะฒะตั ะฝะฐ ัะพะพะฑัะตะฝะธะต](#ะพัะฒะตั-ะฝะฐ-ัะพะพะฑัะตะฝะธะต)
  - [ะะปะพะบะธัะพะฒะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปั](#ะฑะปะพะบะธัะพะฒะบะฐ-ะฟะพะปัะทะพะฒะฐัะตะปั)
  - [ะัะพัะผะพัั ััะฐัะธััะธะบะธ](#ะฟัะพัะผะพัั-ััะฐัะธััะธะบะธ)
- [ะะพะผะฐะฝะดั ะฑะพัะฐ](#ะบะพะผะฐะฝะดั-ะฑะพัะฐ)
- [ะะพะดะดะตัะถะธะฒะฐะตะผัะต ัะธะฟั ะบะพะฝัะตะฝัะฐ](#ะฟะพะดะดะตัะถะธะฒะฐะตะผัะต-ัะธะฟั-ะบะพะฝัะตะฝัะฐ)
- [ะกัััะบัััะฐ ะฟัะพะตะบัะฐ](#ััััะบัััะฐ-ะฟัะพะตะบัะฐ)
- [ะะฐะทะฐ ะดะฐะฝะฝัั](#ะฑะฐะทะฐ-ะดะฐะฝะฝัั)
- [ะััะธัะตะบัััะฐ](#ะฐััะธัะตะบัััะฐ)
- [ะะปะฐะฝั ะฟะพ ัะปัััะตะฝะธั](#ะฟะปะฐะฝั-ะฟะพ-ัะปัััะตะฝะธั)
- [ะัะบะฐะฟั](#ะฑัะบะฐะฟั)
- [ะะตะฟะปะพะน](#ะดะตะฟะปะพะน)

## ะะพะทะผะพะถะฝะพััะธ

- ะกะพะทะดะฐะฝะธะต ัะฝะธะบะฐะปัะฝัั ัััะปะพะบ ะดะปั ะฟะพะปััะตะฝะธั ะฐะฝะพะฝะธะผะฝัั ัะพะพะฑัะตะฝะธะน (ัะพะปัะบะพ ะดะปั ะฐะดะผะธะฝะพะฒ)
- ะัะฟัะฐะฒะบะฐ ะธ ะฟะพะปััะตะฝะธะต ัะตะบััะพะฒัั ัะพะพะฑัะตะฝะธะน
- ะะพะดะดะตัะถะบะฐ ะผะตะดะธะฐ: ัะพัะพ, ะฒะธะดะตะพ, ะณะพะปะพัะพะฒัะต, ะฒะธะดะตะพะบััะถะบะธ, ััะธะบะตัั, ะดะพะบัะผะตะฝัั, ะฐัะดะธะพ, GIF
- ะะฝะพะฝะธะผะฝัะต ะพัะฒะตัั ะฝะฐ ะฟะพะปััะตะฝะฝัะต ัะพะพะฑัะตะฝะธั
- ะะปะพะบะธัะพะฒะบะฐ ะฝะตะถะตะปะฐัะตะปัะฝัั ะพัะฟัะฐะฒะธัะตะปะตะน
- Rate limiting โ ะทะฐัะธัะฐ ะพั ัะฟะฐะผะฐ (ะฝะฐัััะฐะธะฒะฐะตะผัะน ะปะธะผะธั ัะพะพะฑัะตะฝะธะน)
- ะกัะฐัะธััะธะบะฐ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะฑะพัะฐ (ะดะปั ะฐะดะผะธะฝะพะฒ)
- ะะตััะธััะตะฝัะฝะพะต ััะฐะฝะตะฝะธะต FSM-ัะพััะพัะฝะธะน ะฒ Redis
- ะกะพััะฐะฝะตะฝะธะต ะธััะพัะธะธ ัะพะพะฑัะตะฝะธะน ะฒ SQLite

## ะขัะตะฑะพะฒะฐะฝะธั

- Python 3.11+
- Redis 7+
- Docker ะธ Docker Compose (ะดะปั production)

## ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

| ะะตัะตะผะตะฝะฝะฐั | ะะฑัะทะฐัะตะปัะฝะฐั | ะะพ ัะผะพะปัะฐะฝะธั | ะะฟะธัะฐะฝะธะต |
|------------|--------------|--------------|----------|
| `BOT_TOKEN` | ะะฐ | - | ะขะพะบะตะฝ Telegram-ะฑะพัะฐ ะพั [@BotFather](https://t.me/BotFather) |
| `REDIS_URL` | ะะตั | `redis://localhost:6379/0` | URL ะฟะพะดะบะปััะตะฝะธั ะบ Redis ะดะปั ััะฐะฝะตะฝะธั FSM-ัะพััะพัะฝะธะน |
| `DB_PATH` | ะะตั | `db/anonbot.db` | ะััั ะบ ัะฐะนะปั SQLite ะฑะฐะทั ะดะฐะฝะฝัั |
| `ADMIN_IDS` | ะะตั | - | ะกะฟะธัะพะบ Telegram ID ะฐะดะผะธะฝะธัััะฐัะพัะพะฒ ัะตัะตะท ะทะฐะฟัััั. ะขะพะปัะบะพ ะพะฝะธ ะผะพะณัั ัะพะทะดะฐะฒะฐัั ัััะปะบะธ ะธ ัะผะพััะตัั ััะฐัะธััะธะบั |
| `RATE_LIMIT_MESSAGES` | ะะตั | `5` | ะะฐะบัะธะผะฐะปัะฝะพะต ะบะพะปะธัะตััะฒะพ ัะพะพะฑัะตะฝะธะน ะฒ ะฟะตัะธะพะด |
| `RATE_LIMIT_PERIOD` | ะะตั | `60` | ะะตัะธะพะด rate limiting ะฒ ัะตะบัะฝะดะฐั |

### ะัะธะผะตั ัะฐะนะปะฐ `.env`

```env
BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
REDIS_URL=redis://localhost:6379/0
DB_PATH=db/anonbot.db
ADMIN_IDS=123456789,987654321
RATE_LIMIT_MESSAGES=5
RATE_LIMIT_PERIOD=60
```

## ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ

### ะะพะบะฐะปัะฝัะน ะทะฐะฟััะบ

1. ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน:
```bash
git clone https://github.com/Uttah/abot.git
cd abot
```

2. ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ:
```bash
pip install -r requirements.txt
```

3. ะะฐะฟัััะธัะต Redis:
```bash
# macOS
brew install redis && brew services start redis

# Ubuntu/Debian
sudo apt install redis-server && sudo systemctl start redis

# ะะปะธ ัะตัะตะท Docker
docker run -d --name redis -p 6379:6379 redis:7-alpine
```

4. ะกะพะทะดะฐะนัะต ัะฐะนะป `.env` ะธ ะดะพะฑะฐะฒััะต ะฟะตัะตะผะตะฝะฝัะต:
```bash
cat > .env << EOF
BOT_TOKEN=ะฒะฐั_ัะพะบะตะฝ
ADMIN_IDS=ะฒะฐั_telegram_id
EOF
```

5. ะะฐะฟัััะธัะต ะฑะพัะฐ:
```bash
python -m src
```

### ะะฐะฟััะบ ัะตัะตะท Docker Compose

1. ะกะพะทะดะฐะนัะต ัะฐะนะป `.env`:
```bash
cat > .env << EOF
BOT_TOKEN=ะฒะฐั_ัะพะบะตะฝ
ADMIN_IDS=ะฒะฐั_telegram_id
RATE_LIMIT_MESSAGES=5
RATE_LIMIT_PERIOD=60
EOF
```

2. ะะฐะฟัััะธัะต ัะตัะฒะธัั:
```bash
docker compose up -d --build
```

3. ะัะพะฒะตัััะต ะปะพะณะธ:
```bash
docker logs -f anonbot
```

4. ะััะฐะฝะพะฒะบะฐ:
```bash
docker compose down
```

## ะัะฟะพะปัะทะพะฒะฐะฝะธะต

### ะกะพะทะดะฐะฝะธะต ัััะปะบะธ (ัะพะปัะบะพ ะดะปั ะฐะดะผะธะฝะพะฒ)

1. ะฃะฑะตะดะธัะตัั, ััะพ ะฒะฐั Telegram ID ะดะพะฑะฐะฒะปะตะฝ ะฒ `ADMIN_IDS`
2. ะัะฟัะฐะฒััะต ะฑะพัั ะบะพะผะฐะฝะดั `/start`
3. ะะพั ัะพะทะดะฐัั ัะฝะธะบะฐะปัะฝัั ัััะปะบั ะฒะธะดะฐ `https://t.me/ะะผัะะพัะฐ?start=ะะะ`
4. ะะพะดะตะปะธัะตัั ััะพะน ัััะปะบะพะน ั ัะตะผะธ, ะพั ะบะพะณะพ ัะพัะธัะต ะฟะพะปััะฐัั ะฐะฝะพะฝะธะผะฝัะต ัะพะพะฑัะตะฝะธั

> ะะพะปัะทะพะฒะฐัะตะปะธ, ะฝะต ะฒัะพะดััะธะต ะฒ `ADMIN_IDS`, ะฟะพะปััะฐั ัะพะพะฑัะตะฝะธะต ะพะฑ ะพะณัะฐะฝะธัะตะฝะธะธ ะดะพัััะฟะฐ.

### ะัะฟัะฐะฒะบะฐ ะฐะฝะพะฝะธะผะฝะพะณะพ ัะพะพะฑัะตะฝะธั

1. ะะตัะตะนะดะธัะต ะฟะพ ัััะปะบะต, ะฟะพะปััะตะฝะฝะพะน ะพั ะฒะปะฐะดะตะปััะฐ
2. ะะพั ะฟัะตะดะปะพะถะธั ะฝะฐะฟะธัะฐัั ะฐะฝะพะฝะธะผะฝะพะต ัะพะพะฑัะตะฝะธะต
3. ะัะฟัะฐะฒััะต ัะตะบัั ะธะปะธ ะผะตะดะธะฐ (ัะพัะพ, ะฒะธะดะตะพ, ะณะพะปะพัะพะฒะพะต ะธ ั.ะด.)
4. ะกะพะพะฑัะตะฝะธะต ะฑัะดะตั ะดะพััะฐะฒะปะตะฝะพ ะฒะปะฐะดะตะปััั ัััะปะบะธ ะฐะฝะพะฝะธะผะฝะพ
5. ะะปั ะฒััะพะดะฐ ะธะท ัะตะถะธะผะฐ ะพัะฟัะฐะฒะบะธ ะฒะฒะตะดะธัะต `/stop`

> ะัะธ ะฟัะตะฒััะตะฝะธะธ ะปะธะผะธัะฐ ัะพะพะฑัะตะฝะธะน ะฑะพั ัะฒะตะดะพะผะธั ะพ ะฝะตะพะฑัะพะดะธะผะพััะธ ะฟะพะดะพะถะดะฐัั.

### ะัะฒะตั ะฝะฐ ัะพะพะฑัะตะฝะธะต

1. ะัะธ ะฟะพะปััะตะฝะธะธ ะฐะฝะพะฝะธะผะฝะพะณะพ ัะพะพะฑัะตะฝะธั ะฟะพะด ะฝะธะผ ะฟะพัะฒัััั ะบะฝะพะฟะบะธ "โ๏ธ ะัะฒะตัะธัั" ะธ "๐ซ ะะฐะฑะปะพะบะธัะพะฒะฐัั"
2. ะะฐะถะผะธัะต "โ๏ธ ะัะฒะตัะธัั" ะธ ะฒะฒะตะดะธัะต ัะตะบัั ะพัะฒะตัะฐ ะธะปะธ ะพัะฟัะฐะฒััะต ะผะตะดะธะฐ
3. ะัะฒะตั ะฑัะดะตั ะดะพััะฐะฒะปะตะฝ ะพัะฟัะฐะฒะธัะตะปั ะฐะฝะพะฝะธะผะฝะพ

### ะะปะพะบะธัะพะฒะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปั

1. ะะฐะถะผะธัะต ะบะฝะพะฟะบั "๐ซ ะะฐะฑะปะพะบะธัะพะฒะฐัั" ะฟะพะด ัะพะพะฑัะตะฝะธะตะผ ะพั ะฝะตะถะตะปะฐัะตะปัะฝะพะณะพ ะพัะฟัะฐะฒะธัะตะปั
2. ะะพะปัะทะพะฒะฐัะตะปั ะฑะพะปััะต ะฝะต ัะผะพะถะตั ะพัะฟัะฐะฒะปััั ะฒะฐะผ ัะพะพะฑัะตะฝะธั
3. ะะฐะฑะปะพะบะธัะพะฒะฐะฝะฝัะน ัะฒะธะดะธั ัะพะพะฑัะตะฝะธะต: "โ ะั ะฝะต ะผะพะถะตัะต ะพัะฟัะฐะฒะปััั ัะพะพะฑัะตะฝะธั ััะพะผั ะฟะพะปัะทะพะฒะฐัะตะปั"

### ะัะพัะผะพัั ััะฐัะธััะธะบะธ

ะัะฟัะฐะฒััะต ะบะพะผะฐะฝะดั `/stats` (ัะพะปัะบะพ ะดะปั ะฐะดะผะธะฝะพะฒ):

```
๐ ะกัะฐัะธััะธะบะฐ ะฑะพัะฐ

๐จ ะกะพะพะฑัะตะฝะธะน ะฒัะตะณะพ: 150
๐ ะกะพะพะฑัะตะฝะธะน ัะตะณะพะดะฝั: 12
๐ฅ ะฃะฝะธะบะฐะปัะฝัั ะพัะฟัะฐะฒะธัะตะปะตะน: 45
๐ ะกััะปะพะบ ัะพะทะดะฐะฝะพ: 5
๐ค ะะพะปัะทะพะฒะฐัะตะปะตะน: 50
๐ซ ะะฐะฑะปะพะบะธัะพะฒะฐะฝะพ: 3
```

## ะะพะผะฐะฝะดั ะฑะพัะฐ

| ะะพะผะฐะฝะดะฐ | ะะฟะธัะฐะฝะธะต | ะะพัััะฟ |
|---------|----------|--------|
| `/start` | ะกะพะทะดะฐัั ะฝะพะฒัั ัััะปะบั ะดะปั ะฐะฝะพะฝะธะผะฝัั ัะพะพะฑัะตะฝะธะน | ะขะพะปัะบะพ ะฐะดะผะธะฝั |
| `/start <code>` | ะะตัะตะนัะธ ะฟะพ ัััะปะบะต ะธ ะพัะฟัะฐะฒะธัั ะฐะฝะพะฝะธะผะฝะพะต ัะพะพะฑัะตะฝะธะต | ะัะต |
| `/stop` | ะัะนัะธ ะธะท ัะตะถะธะผะฐ ะพัะฟัะฐะฒะบะธ ัะพะพะฑัะตะฝะธะน | ะัะต |
| `/stats` | ะะพะบะฐะทะฐัั ััะฐัะธััะธะบั ะฑะพัะฐ | ะขะพะปัะบะพ ะฐะดะผะธะฝั |

## ะะพะดะดะตัะถะธะฒะฐะตะผัะต ัะธะฟั ะบะพะฝัะตะฝัะฐ

| ะขะธะฟ | ะะฟะธัะฐะฝะธะต | Caption |
|-----|----------|---------|
| `text` | ะขะตะบััะพะฒะพะต ัะพะพะฑัะตะฝะธะต | - |
| `photo` | ะคะพัะพะณัะฐัะธั | ะะฐ |
| `video` | ะะธะดะตะพ | ะะฐ |
| `animation` | GIF-ะฐะฝะธะผะฐัะธั | ะะฐ |
| `voice` | ะะพะปะพัะพะฒะพะต ัะพะพะฑัะตะฝะธะต | ะะฐ |
| `video_note` | ะะธะดะตะพะบััะถะพะบ | ะะตั |
| `sticker` | ะกัะธะบะตั | ะะตั |
| `document` | ะะพะบัะผะตะฝั/ัะฐะนะป | ะะฐ |
| `audio` | ะัะดะธะพัะฐะนะป | ะะฐ |

## ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
abot/
โโโ src/
โ   โโโ __init__.py
โ   โโโ __main__.py              # ะขะพัะบะฐ ะฒัะพะดะฐ
โ   โโโ bot.py                   # ะะฝะธัะธะฐะปะธะทะฐัะธั ะฑะพัะฐ, ะดะธัะฟะตััะตัะฐ, middlewares
โ   โโโ config.py                # ะะฐะณััะทะบะฐ ะบะพะฝัะธะณััะฐัะธะธ ะธะท .env
โ   โโโ database.py              # ะกัะตะผะฐ ะะ ะธ ะผะธะณัะฐัะธะธ
โ   โโโ callbacks.py             # Callback-ะดะฐะฝะฝัะต ะดะปั inline-ะบะฝะพะฟะพะบ
โ   โโโ keyboards.py             # Inline-ะบะปะฐะฒะธะฐัััั
โ   โโโ media.py                 # ะฃัะธะปะธัั ะดะปั ัะฐะฑะพัั ั ะผะตะดะธะฐ
โ   โโโ states.py                # FSM-ัะพััะพัะฝะธั
โ   โโโ handlers/
โ   โ   โโโ start.py             # ะะฑัะฐะฑะพััะธะบ /start (ัะพะทะดะฐะฝะธะต ัััะปะบะธ)
โ   โ   โโโ stop.py              # ะะฑัะฐะฑะพััะธะบ /stop
โ   โ   โโโ stats.py             # ะะฑัะฐะฑะพััะธะบ /stats (ััะฐัะธััะธะบะฐ)
โ   โ   โโโ anon_message.py      # ะัะฟัะฐะฒะบะฐ ะฐะฝะพะฝะธะผะฝัั ัะพะพะฑัะตะฝะธะน
โ   โ   โโโ reply_click.py       # ะะฐะถะฐัะธะต ะบะฝะพะฟะบะธ "ะัะฒะตัะธัั"
โ   โ   โโโ owner_reply.py       # ะัะฟัะฐะฒะบะฐ ะพัะฒะตัะฐ ะฒะปะฐะดะตะปััะตะผ
โ   โ   โโโ block.py             # ะะปะพะบะธัะพะฒะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
โ   โ   โโโ errors.py            # ะะปะพะฑะฐะปัะฝัะต ะพะฑัะฐะฑะพััะธะบะธ ะพัะธะฑะพะบ
โ   โ   โโโ debug.py             # ะัะปะฐะดะพัะฝัะน ัะตะฝะดะปะตั
โ   โโโ middlewares/
โ       โโโ __init__.py
โ       โโโ throttling.py        # Rate limiting middleware
โโโ db/                          # ะะธัะตะบัะพัะธั ะดะปั SQLite ะฑะฐะทั
โโโ docker-compose.yml           # ะะพะฝัะธะณััะฐัะธั Docker Compose
โโโ Dockerfile
โโโ Makefile
โโโ requirements.txt
โโโ README.md
```

## ะะฐะทะฐ ะดะฐะฝะฝัั

ะัะฟะพะปัะทัะตััั SQLite. ะะฐะทะฐ ัะพะทะดะฐัััั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะธ ะฟะตัะฒะพะผ ะทะฐะฟััะบะต.

### ะขะฐะฑะปะธัั

**users** โ ะฟะพะปัะทะพะฒะฐัะตะปะธ ะฑะพัะฐ
| ะะพะปะต | ะขะธะฟ | ะะฟะธัะฐะฝะธะต |
|------|-----|----------|
| `id` | INTEGER | ะะตัะฒะธัะฝัะน ะบะปัั |
| `tg_user_id` | INTEGER | Telegram ID ะฟะพะปัะทะพะฒะฐัะตะปั (ัะฝะธะบะฐะปัะฝัะน) |

**links** โ ัััะปะบะธ ะดะปั ะฐะฝะพะฝะธะผะฝัั ัะพะพะฑัะตะฝะธะน
| ะะพะปะต | ะขะธะฟ | ะะฟะธัะฐะฝะธะต |
|------|-----|----------|
| `id` | INTEGER | ะะตัะฒะธัะฝัะน ะบะปัั |
| `code` | TEXT | ะฃะฝะธะบะฐะปัะฝัะน ะบะพะด ัััะปะบะธ |
| `owner_id` | INTEGER | FK ะฝะฐ users.id |

**messages** โ ัะพะพะฑัะตะฝะธั
| ะะพะปะต | ะขะธะฟ | ะะฟะธัะฐะฝะธะต |
|------|-----|----------|
| `id` | INTEGER | ะะตัะฒะธัะฝัะน ะบะปัั |
| `link_id` | INTEGER | FK ะฝะฐ links.id |
| `sender_user_id` | INTEGER | FK ะฝะฐ users.id (NULL ะดะปั ะพัะฒะตัะพะฒ ะฒะปะฐะดะตะปััะฐ) |
| `text` | TEXT | ะขะตะบัั ัะพะพะฑัะตะฝะธั ะธะปะธ caption |
| `media_type` | TEXT | ะขะธะฟ ะผะตะดะธะฐ (photo, video, ะธ ั.ะด.) |
| `media_file_id` | TEXT | Telegram file_id ะดะปั ะผะตะดะธะฐ |
| `created_at` | DATETIME | ะัะตะผั ัะพะทะดะฐะฝะธั |
| `reply_to_id` | INTEGER | ID ัะพะพะฑัะตะฝะธั, ะฝะฐ ะบะพัะพัะพะต ััะพ ะพัะฒะตั |

**blocked_users** โ ะทะฐะฑะปะพะบะธัะพะฒะฐะฝะฝัะต ะฟะพะปัะทะพะฒะฐัะตะปะธ
| ะะพะปะต | ะขะธะฟ | ะะฟะธัะฐะฝะธะต |
|------|-----|----------|
| `id` | INTEGER | ะะตัะฒะธัะฝัะน ะบะปัั |
| `owner_id` | INTEGER | FK ะฝะฐ users.id (ะบัะพ ะทะฐะฑะปะพะบะธัะพะฒะฐะป) |
| `blocked_id` | INTEGER | FK ะฝะฐ users.id (ะบะพะณะพ ะทะฐะฑะปะพะบะธัะพะฒะฐะปะธ) |
| `created_at` | DATETIME | ะัะตะผั ะฑะปะพะบะธัะพะฒะบะธ |

## ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโ
โ  Telegram   โโโโโโถโ   AnonBot   โโโโโโถโ   SQLite    โ
โ   Users     โโโโโโโ  (aiogram)  โ     โ  (messages) โ
โโโโโโโโโโโโโโโ     โโโโโโโโฌโโโโโโโ     โโโโโโโโโโโโโโโ
                           โ
                           โผ
                    โโโโโโโโโโโโโโโ
                    โ    Redis    โ
                    โ (FSM state) โ
                    โโโโโโโโโโโโโโโ
```

- **aiogram 3.x** โ ะฐัะธะฝััะพะฝะฝัะน ััะตะนะผะฒะพัะบ ะดะปั Telegram Bot API
- **Redis** โ ััะฐะฝะตะฝะธะต FSM-ัะพััะพัะฝะธะน (ะฟะตััะธััะตะฝัะฝะพ ะผะตะถะดั ะฟะตัะตะทะฐะฟััะบะฐะผะธ)
- **SQLite** โ ััะฐะฝะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปะตะน, ัััะปะพะบ, ัะพะพะฑัะตะฝะธะน, ะฑะปะพะบะธัะพะฒะพะบ
- **Rate Limiting** โ middleware ะฝะฐ ะฑะฐะทะต Redis ะดะปั ะทะฐัะธัั ะพั ัะฟะฐะผะฐ

## ะะปะฐะฝั ะฟะพ ัะปัััะตะฝะธั

### ะคัะฝะบัะธะพะฝะฐะป

- [ ] `/unblock` โ ัะฐะทะฑะปะพะบะธัะพะฒะฐัั ะฟะพะปัะทะพะฒะฐัะตะปั
- [ ] `/mylinks` โ ะฟะพะบะฐะทะฐัั ะฒัะต ัะฒะพะธ ัััะปะบะธ
- [ ] `/deletelink` โ ัะดะฐะปะธัั ัััะปะบั
- [ ] `/broadcast` โ ัะฐัััะปะบะฐ ะฒัะตะผ ัะทะตัะฐะผ (ะดะปั ะฐะดะผะธะฝะพะฒ)

## ะัะบะฐะฟั

ะะตะบะพะผะตะฝะดัะตััั ะฝะฐัััะพะธัั ะตะถะตะดะฝะตะฒะฝัะน ะฑัะบะฐะฟ ะฑะฐะทั ะดะฐะฝะฝัั ัะตัะตะท cron:

```bash
# ะกะพะทะดะฐัั ะดะธัะตะบัะพัะธั ะดะปั ะฑัะบะฐะฟะพะฒ
mkdir -p /opt/anonbot_backup

# ะะพะฑะฐะฒะธัั ะฒ crontab (ะตะถะตะดะฝะตะฒะฝะพ ะฒ 01:00)
crontab -e
```

```cron
0 1 * * * /usr/bin/sqlite3 /root/abot/db/anonbot.db ".backup '/opt/anonbot_backup/db-$(date +\%F-\%T).sqlite3'"
```

ะะปั ัะพัะฐัะธะธ ััะฐััั ะฑัะบะฐะฟะพะฒ (ัะดะฐะปะตะฝะธะต ััะฐััะต 30 ะดะฝะตะน):

```cron
0 2 * * * find /opt/anonbot_backup -name "*.sqlite3" -mtime +30 -delete
```

## ะะตะฟะปะพะน

### ะะฐ ัะตัะฒะตั ั Docker

```bash
# ะะฐ ะปะพะบะฐะปัะฝะพะน ะผะฐัะธะฝะต
git add -A && git commit -m "update" && git push

# ะะฐ ัะตัะฒะตัะต
cd /root/abot
git pull
docker compose up -d --build
```

### ะัะพัะผะพัั ะปะพะณะพะฒ

```bash
# ะะพะณะธ ะฑะพัะฐ
docker logs -f anonbot

# ะะพะณะธ Redis
docker logs -f anonbot_redis
```

### ะัะพะฒะตัะบะฐ ัะพััะพัะฝะธั

```bash
# ะกัะฐััั ะบะพะฝัะตะนะฝะตัะพะฒ
docker compose ps

# ะัะพะฒะตัะบะฐ Redis
docker exec anonbot_redis redis-cli ping

# ะัะพะฒะตัะบะฐ ะฑะฐะทั ะดะฐะฝะฝัั
sqlite3 /root/abot/db/anonbot.db "SELECT COUNT(*) FROM messages;"
```
